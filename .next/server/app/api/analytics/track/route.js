"use strict";(()=>{var e={};e.id=452,e.ids=[452],e.modules={20399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},30517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},13685:e=>{e.exports=require("http")},95687:e=>{e.exports=require("https")},85477:e=>{e.exports=require("punycode")},12781:e=>{e.exports=require("stream")},57310:e=>{e.exports=require("url")},59796:e=>{e.exports=require("zlib")},89271:(e,t,r)=>{r.r(t),r.d(t,{originalPathname:()=>x,patchFetch:()=>y,requestAsyncStorage:()=>h,routeModule:()=>I,serverHooks:()=>k,staticGenerationAsyncStorage:()=>m});var s={};r.r(s),r.d(s,{POST:()=>l});var n=r(49303),a=r(88716),i=r(60670),o=r(87070),p=r(69498);let u="https://wafyntuaohdxgnrypnvr.supabase.co",c=process.env.SUPABASE_SERVICE_ROLE_KEY||"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InNrd21ta3N6d2FpcXFqcmNuaWdqIiwicm9sZSI6InNlcnZpY2Vfcm9sZSIsImlhdCI6MTc1ODk1NDI1NCwiZXhwIjoyMDc0NTMwMjU0fQ.c2gT2wB4ZxXjVP7fdMfyctmtJfkitpv-zhmq99zTC0E",d=(0,p.eI)(u,"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6IndhZnludHVhb2hkeGducnlwbnZyIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTg5OTY3MjcsImV4cCI6MjA3NDU3MjcyN30.iCbb617friVk_OKZ9-WCvuMFQqlQKzWhrA0Nr-02pZk",{auth:{persistSession:!1,autoRefreshToken:!1,detectSessionInUrl:!1},global:{headers:{"X-Client-Info":"supabase-js-web"}},db:{schema:"public"}});async function l(e){try{let t=e.headers.get("content-type");if(!t||!t.includes("application/json"))return o.NextResponse.json({error:"Invalid content type"},{status:400});let r=await e.text();if(!r||""===r.trim())return o.NextResponse.json({error:"Empty request body"},{status:400});let s="unknown",n="unknown";try{let e=JSON.parse(r);s=e.page||"unknown",n=e.user_agent||"unknown"}catch(e){return o.NextResponse.json({error:"Invalid JSON format"},{status:400})}let a=e.headers.get("x-forwarded-for"),i=a?a.split(",")[0]:e.ip||"unknown",{error:p}=await d.from("website_visits").insert([{page:s,timestamp:new Date().toISOString(),user_agent:n||e.headers.get("user-agent")||"unknown",ip_address:i}]);if(p)return o.NextResponse.json({error:"Failed to track visit"},{status:500});return o.NextResponse.json({success:!0})}catch(e){return o.NextResponse.json({error:"Internal server error"},{status:500})}}(0,p.eI)(u,c,{auth:{persistSession:!1,autoRefreshToken:!1,detectSessionInUrl:!1},global:{headers:{"X-Client-Info":"supabase-js-server"}},db:{schema:"public"}});let I=new n.AppRouteRouteModule({definition:{kind:a.x.APP_ROUTE,page:"/api/analytics/track/route",pathname:"/api/analytics/track",filename:"route",bundlePath:"app/api/analytics/track/route"},resolvedPagePath:"D:\\The Wedding Tales\\work\\TheWeddingTales\\app\\api\\analytics\\track\\route.ts",nextConfigOutput:"",userland:s}),{requestAsyncStorage:h,staticGenerationAsyncStorage:m,serverHooks:k}=I,x="/api/analytics/track/route";function y(){return(0,i.patchFetch)({serverHooks:k,staticGenerationAsyncStorage:m})}}};var t=require("../../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),s=t.X(0,[216,592],()=>r(89271));module.exports=s})();